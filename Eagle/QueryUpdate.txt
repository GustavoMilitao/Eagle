DECLARE @TABLENAME VARCHAR(100) = @tabela
DECLARE @FIELDNAME VARCHAR(100)
DECLARE @SQLUPDATE NVARCHAR(300)


DECLARE CUR1 CURSOR FOR
SELECT COLUMN_NAME
FROM Eagle.INFORMATION_SCHEMA.COLUMNS
WHERE TABLE_NAME = @TABLENAME
set @SQLUPDATE = 'UPDATE '+@TABLENAME+' SET '

OPEN CUR1

FETCH NEXT FROM CUR1 INTO @FIELDNAME

WHILE @@FETCH_STATUS = 0
BEGIN
  
set @SQLUPDATE = 
CASE WHEN @FIELDNAME <> 'ID' THEN
@SQLUPDATE +CHAR(13)+CHAR(10)+ @FIELDNAME + ' = @'+@FIELDNAME+','
ELSE @SQLUPDATE 
END

FETCH NEXT FROM CUR1 INTO @FIELDNAME
END

set @SQLUPDATE = LEFT(@SQLUPDATE, NULLIF(LEN(@SQLUPDATE)-1,-1)) +CHAR(13)+CHAR(10)+'WHERE ID = @ID'

CLOSE CUR1
DEALLOCATE CUR1 

SELECT @SQLUPDATE
